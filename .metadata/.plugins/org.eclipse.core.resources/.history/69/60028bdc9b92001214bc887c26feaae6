<?php
echo "http://".$_SERVER ['HTTP_HOST'];
echo $_SERVER["DOCUMENT_ROOT"];

$newPath = explode(":", $_SERVER["DOCUMENT_ROOT"]);
echo "<br/>".$newPath[1];


function format_url($srcurl, $baseurl) {  
  $srcinfo = parse_url($srcurl);
  if(isset($srcinfo['scheme'])) {
    return $srcurl;
  }
  $baseinfo = parse_url($baseurl);
  $url = $baseinfo['scheme'].'://'.$baseinfo['host'];
  if(substr($srcinfo['path'], 0, 1) == '/') {
    $path = $srcinfo['path'];
  }else{
    $path = dirname($baseinfo['path']).'/'.$srcinfo['path'];
  }
  $rst = array();
  $path_array = explode(กฎ/กฏ, $path);
  if(!$path_array[0]) {
    $rst[] = กฑ;
  }
  foreach ($path_array AS $key => $dir) {
    if ($dir == กฎ..กฏ) {
      if (end($rst) == กฎ..กฏ) {
        $rst[] = กฎ..กฏ;
      }elseif(!array_pop($rst)) {
        $rst[] = กฎ..กฏ;
      }
    }elseif($dir && $dir != กฎ.กฏ) {
      $rst[] = $dir;
    }
   }
  if(!end($path_array)) {
    $rst[] = กฑ;
  }
  $url .= implode(กฎ/กฏ, $rst);
  return str_replace(กฎ\\กฏ, กฎ/กฏ, $url);
}

$srcurl = กฎ/guestbook.phpกฏ;
$baseurl = กฎhttp://www.msphome.cn/index.php/ddd.htmlกฏ;
echo format_url($srcurl, $baseurl);
?>